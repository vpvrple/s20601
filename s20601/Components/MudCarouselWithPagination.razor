@using s20601.Data.Interfaces

@typeparam TItem where TItem : INavigable

<MudCarousel Style="height: 300px;" ShowArrows="true" TData="TItem" ShowBullets="false" AutoCycle="false">
    @{
        int totalCarousels = (int)Math.Ceiling((double)(Items.Count) / itemsPerCarousel);
        totalCarousels = Math.Max(totalCarousels, 1);
    }
    @for (int i = 0; i < totalCarousels; i++)
    {
        int numbersOfElementToSkip = i * itemsPerCarousel;
        <MudCarouselItem>
            <MudGrid Justify="Justify.Center" Class="pa-2 align-center" Spacing="3">
                @foreach (var item in Items.Skip(numbersOfElementToSkip).Take(itemsPerCarousel))
                {
                    <MudItem>
                        <MudCard Class="align-center" Style="height: 240px; width:180px">
                            <MudImage Src="favicon.png"
                                      ObjectFit="ObjectFit.None"
                                      Alt="Movie poster"
                                      Elevation="1"
                                      Style="height:100%; width: 100%;">
                            </MudImage>
                            
                            <MudCardContent Style="height:100%"><MudLink Href="@item.GetUrl()">@((item.ToString().Length > 10) ?
                                                                               $"{item.ToString().Substring(0, 10)}..." :
                                                                               @item)</MudLink></MudCardContent>
                        </MudCard>
                    </MudItem>
                }
            </MudGrid>
        </MudCarouselItem>
    }
</MudCarousel>

@code {
    [Parameter]
    public required ICollection<TItem> Items { get; set; }

    [Parameter]
    public int itemsPerCarousel { get; set; }
}
