@inherits LayoutComponentBase
@using MediatR
@using Microsoft.AspNetCore.Identity
@using s20601.Components.Common.Components
@using s20601.Data.Models
@using s20601.Events.Commands
@using s20601.Events.Commands.UserLogIns
@using s20601.Services

@inject UserManager<ApplicationUser> UserManager
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject IUserService UserService

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider 
    CloseOnEscapeKey="true"
    Position="DialogPosition.Center"
    CloseButton="true"
    MaxWidth="MaxWidth.Medium"
    FullWidth="true"/>
<MudSnackbarProvider />

<MudLayout Class="d-flex flex-column" Style="min-height: 100vh">
    <MudAppBar Elevation="0" Color="Color.Transparent" Fixed="false">
        <Menu />
        <AppBar />
    </MudAppBar>

    <MudMainContent Class="pa-2 flex-grow-1">
        <MudContainer Class="mt-6">
            @Body
        </MudContainer>
    </MudMainContent>

    <MudAppBar Dense="true" Elevation="0" Color="Color.Dark" Fixed="false" Class="align-center mt-6">
        <MudText Typo="Typo.body1">s20601</MudText>
    </MudAppBar>
</MudLayout>

@code {
    protected override async Task OnInitializedAsync()
    {
        await UserService.DailyLogin();
    }
}