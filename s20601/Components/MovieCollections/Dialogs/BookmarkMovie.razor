@using s20601.Data.Models
@inject IDialogService DialogService

<AuthorizeView>
    <Authorized>
        <MudIconButton Icon="@Icons.Material.Outlined.BookmarkAdd" OnClick="@OpenBookmarkMovieToCollectionDialog" Color="@_bookmarkColor"/>
    </Authorized>
</AuthorizeView>


@code
{

    [Parameter] public required int MovieId { get; set; }

    private Color _bookmarkColor = Color.Dark;
    // private bool _bookmarked = false;
    
    private async Task OpenBookmarkMovieToCollectionDialog()
    {
        var parameters = new DialogParameters<BookmarkMovieToCollectionDialog>
        {
            { x => x.MovieId, MovieId }
        };

        var dialog = await DialogService.ShowAsync<BookmarkMovieToCollectionDialog>("Add to collection", parameters);
        var result = await dialog.Result;

        if (result is { Canceled: false, Data: MovieCollection })
        {
            StateHasChanged();
        }
    }
}
